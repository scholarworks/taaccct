<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>

<!--  
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
-->

<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>

<!--  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->
<style type="text/css">
.industries {
	margin: 20px;
}
</style>
<script>
$(document).ready(function() {

	var industryAPI = "http://www.skillscommons.org/portal/api/industries.php";
	$.getJSON( industryAPI )
		.done(function(data) {

			var $topHeading = $('<h1 />');
			$topHeading.append("Browse by Industry");
			
			var $topUL = $('<ul/>');
			
			$.each(data.children, function (i, item) {
				
				var $level1LI = $('<li />');
				$level1LI.append('<a href="https://www.skillscommons.org/discover?query=%22'+item.name+'%22">'+item.name+'</a>' );
											
				var $level2UL = $('<ul />');

				$.each(item.children, function (c, child) {

					var $level2Anchor;
					var $level2LI = $('<li />');
					$level2Anchor = $('<a href="https://www.skillscommons.org/discover?rpp=10&query=%22'+item.name+'+--+'+child.name+'%22" />');
					$level2Anchor.append(child.name);
					$level2LI.append($level2Anchor);
					$level2UL.append($level2LI); 
															
					if ("children" in child) {
						$level3UL = $('<ul />');

						$.each(child.children, function (cc, child_child) {
							$level3Content = '<li><a href="https://www.skillscommons.org/discover?rpp=10&query=%22'+item.name+'+--+'+child.name+'+--+'+child_child.name+'%22">' + child_child.name + '</a></li>';
							$level3UL.append($level3Content);
						});
						$level3LI = $('<li />');
						$level3LI.append($level3UL);
						$level2UL.append($level3LI);
					}
					
					
				});
				
				$topUL.append($level1LI);
				
			});


			$('#categories').html($topHeading);

		});
	// alert("end function");
});
</script>

</head>
<body>

<div id="categories" class="industries"></div>
</body>
</html>